# AI 大纲笔记 MVP

一个结合大纲笔记和 AI 助手的现代化笔记应用，类似 Cursor 的交互体验（左侧编辑，右侧 AI）。

## 🎯 核心功能

### ✅ 已实现

- **大纲编辑器**
  - 无限层级缩进（Tab/Shift+Tab）
  - 块级操作（每个块有唯一 ID）
  - Enter 创建新块，Backspace 删除空块
  - 方向键在块之间导航
  - 折叠/展开功能

- **AI 对话助手**
  - 右侧固定面板，可折叠
  - 发送选中文本到 AI
  - 流式输出回复（打字机效果）
  - 一键插入 AI 回复到笔记

- **双向链接系统**
  - `[[页面名]]` 创建链接
  - 自动创建引用页面
  - 反向链接显示
  - 点击跳转

- **🆕 文件系统存储（类似 Obsidian/Logseq）**
  - Markdown 文件本地存储
  - 实时双向同步
  - 任何编辑器都可编辑
  - 完全掌控数据
  - 详见 [FILE_SYSTEM_STORAGE.md](./FILE_SYSTEM_STORAGE.md)

- **数据管理**
  - IndexedDB 本地缓存
  - 实时数据同步（Dexie.js）
  - 文件系统持久化（可选）
  - 导入/导出功能

- **基础功能**
  - 页面管理（创建、切换、搜索）
  - 今日日记快捷入口
  - 主题切换（浅色/深色）
  - 现代化 UI（Tailwind CSS）

### 🚧 计划中（v0.3+）

- 块引用 `((block-id))`
- 全文搜索（Cmd/Ctrl + K）
- 拖拽排序
- Markdown 语法高亮
- 子文件夹支持
- Git 集成
- 多设备实时同步

## 🚀 快速开始

### 1. 安装依赖

```bash
npm install
```

### 2. 启动开发服务器

```bash
npm run dev
```

应用将在 http://localhost:5173 打开。

### 3. 设置 OpenAI API Key

1. 点击右上角的 "AI 助手" 按钮
2. 点击设置图标（齿轮）
3. 输入你的 OpenAI API Key（以 `sk-` 开头）
4. 点击保存

**注意**：API Key 存储在浏览器本地存储中，仅用于开发演示。生产环境应通过后端代理 API 调用。

## 📖 使用指南

### 基本操作

- **Tab**: 缩进当前块（成为上一个块的子块）
- **Shift+Tab**: 反缩进（提升层级）
- **Enter**: 在下方创建新块
- **Backspace**: 在空块时删除该块
- **↑/↓**: 在块之间导航

### AI 助手

1. 选中笔记内容（点击任意块）
2. 点击右上角 "AI 助手" 打开对话面板
3. 输入问题，AI 会基于选中内容回答
4. 点击回复下方的 "插入到笔记" 将内容添加到笔记

### 页面管理

- **今日日记**: 快速创建或打开今天的日记页面
- **新建页面**: 创建新的笔记页面
- **搜索**: 在侧边栏顶部搜索页面标题

## 🛠️ 技术栈

- **前端框架**: React 18 + TypeScript
- **构建工具**: Vite
- **UI 框架**: Tailwind CSS
- **数据库**: IndexedDB (Dexie.js)
- **AI 集成**: OpenAI API (GPT-3.5-turbo)
- **图标**: Lucide React

## 📁 项目结构

```
src/
├── components/          # React 组件
│   ├── Editor/         # 编辑器组件
│   ├── AIPanel/        # AI 对话面板
│   └── Sidebar/        # 侧边栏
├── db/                 # 数据库配置
├── types/              # TypeScript 类型
├── utils/              # 工具函数
├── lib/                # 第三方库封装
└── App.tsx             # 主应用
```

## 🎨 设计理念

1. **简洁高效**: 专注于核心功能，避免过度设计
2. **键盘优先**: 所有操作都有键盘快捷键
3. **即时反馈**: 实时保存，无需手动保存
4. **本地优先**: 数据完全本地，隐私安全
5. **AI 集成**: AI 不是附加功能，而是核心体验

## 🔒 隐私说明

- **本地优先**: 所有笔记数据存储在你选择的本地文件夹或浏览器 IndexedDB 中
- **无服务器**: 不会上传到任何服务器
- **数据掌控**: 你完全拥有和控制你的数据
- **OpenAI 隐私**: API Key 存储在浏览器本地，只有使用 AI 功能时才发送内容到 OpenAI

## 💾 存储模式

### 文件系统模式（推荐）

- Markdown 文件存储在本地文件夹
- 可用任何编辑器查看编辑
- 兼容 Obsidian、Logseq
- 支持云同步（通过 iCloud/Dropbox 等）
- 详见 [FILE_SYSTEM_STORAGE.md](./FILE_SYSTEM_STORAGE.md)

### IndexedDB 模式（降级）

- 数据存储在浏览器数据库
- 无需选择文件夹
- 适用于不支持文件系统 API 的浏览器
- 可通过导出功能备份数据

## 📝 开发路线图

### Phase 1: 核心功能（当前）✅
- [x] 大纲编辑器
- [x] AI 对话面板
- [x] 基础页面管理
- [x] IndexedDB 存储

### Phase 2: 增强功能（2-4 周）
- [ ] 双向链接
- [ ] 块引用
- [ ] 全文搜索
- [ ] 拖拽排序
- [ ] Markdown 高亮

### Phase 3: 高级功能（4-6 周）
- [ ] 导入/导出
- [ ] 主题切换
- [ ] 快捷键面板
- [ ] 向量检索（RAG）

### Phase 4: 产品化（6+ 周）
- [ ] Electron 打包
- [ ] 云同步（可选）
- [ ] 团队协作（可选）
- [ ] 移动端适配

## 🐛 已知问题

- 拖拽排序尚未实现（需要集成 react-dnd）
- Markdown 语法仅显示纯文本（需要集成渲染器）
- 大量块时性能可能下降（需要虚拟滚动）

## 🤝 贡献

欢迎提交 Issue 和 Pull Request！

## 📄 许可证

MIT License

---

**Made with ❤️ for better note-taking**
